#!/bin/bash

. $HOME/.bin/colr
SEP="    "
Clock() {
	echo "%{B#$cyn}%{F#$blk}$SEP$(date +%r)$SEP%{F-}%{B-}"
}

WS() {
	currentDesktop=$(bspc query -D -d)
	switcher=""
	for desktop in $(bspc query -D); do
		if [[ $desktop = $currentDesktop ]]; then
			switcher="$switcher%{F#$cyn}  %{F-}"
		elif [[ $(bspc query -W -d "$desktop" | wc -l) -gt 0 ]]; then
			switcher="$switcher%{A:bspc desktop -f $desktop:}  %{A}"
		else
			switcher="$switcher%{A:bspc desktop -f $desktop:}  %{A}"
		fi
	done
	echo "$switcher"
}

Weather() {
	echo $(weather-report 47906 | grep Temperature:)
}

Status() {
	uptime=$(pacman -Q | wc -l)
	mpdvol=$(mpc | grep volume)
	echo " $uptime"
}

Name() {
	echo "%{F#$blk}%{B#$cyn}$SEP$(whoami)@$(hostname)$SEP%{B-}%{F-}"
}

echo "%{B#$bg}%{F#$fg}$(Name)%{c}$(WS)%{r}$(Status)$SEP$(Clock)%{F-}%{B-}"
