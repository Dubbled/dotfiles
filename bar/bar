#!/bin/bash

. $HOME/.bin/colr
SEP="    "
Clock() {
	echo "%{B#$red}%{F#$blk}$SEP$(date +%r)$SEP%{F-}%{B-}"
}

WS() {
	currentDesktop=$(bspc query -D -d)
	switcher=""
	for desktop in $(bspc query -D); do
		if [[ $desktop = $currentDesktop ]]; then
			switcher="$switcher%{F#$blk}%{F-}"
		elif [[ $(bspc query -W -d "$desktop" | wc -l) -gt 0 ]]; then
			switcher="$switcher%{F#$mag}%{F-}"
		else
			switcher="$switcher%{F#$wht}%{F-}"
		fi
	done
	echo "%{B#$red}$SEP$SEP$switcher$SEP$SEP%{B-}"
}

Weather() {
	echo $(weather-report 47906 | grep Temperature:)
}

Name() {
	echo "%{F#$blk}%{B#$red}$SEP$(whoami)@$(hostname)$SEP%{B-}%{F-}"
}

echo "$(Name)%{c}$(WS)%{r}$(Clock)"
